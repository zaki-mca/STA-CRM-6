"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9403],{9403:(e,a,l)=>{l.d(a,{i:()=>x});var n=l(95155),r=l(12115),s=l(97168),i=l(89852),t=l(82714),c=l(99840),d=l(68780),o=l(99474);let u=c.zM,p=c.L3,h=t.J;function x(e){var a,l;let{product:t,categories:x,brands:m,onSubmit:v,onAddCategory:j,onAddBrand:y,trigger:g}=e,[b,f]=(0,r.useState)(!1),[N,C]=(0,r.useState)({name:(null==t?void 0:t.name)||"",description:(null==t?void 0:t.description)||"",reference:(null==t?void 0:t.reference)||"",sku:(null==t?void 0:t.sku)||"",categoryId:(null==t?void 0:null===(a=t.category)||void 0===a?void 0:a.id)||"",brandId:(null==t?void 0:null===(l=t.brand)||void 0===l?void 0:l.id)||"",sellPrice:(null==t?void 0:t.sellPrice)||0,buyPrice:(null==t?void 0:t.buyPrice)||0,quantity:(null==t?void 0:t.quantity)||0}),[P,k]=(0,r.useState)(""),[S,I]=(0,r.useState)(""),[q,w]=(0,r.useState)(!1),[F,$]=(0,r.useState)(!1),A=x.map(e=>({value:e.id,label:e.name})),E=m.map(e=>({value:e.id,label:e.name}));return(0,r.useEffect)(()=>{if(N.categoryId&&N.brandId&&N.description){let e=x.find(e=>e.id===N.categoryId),a=m.find(e=>e.id===N.brandId);if(e&&a){let l=N.description.length>30?N.description.substring(0,30)+"...":N.description;C(n=>({...n,name:"".concat(e.name," ").concat(a.name," ").concat(l)}))}}},[N.categoryId,N.brandId,N.description,x,m]),(0,n.jsxs)(c.lG,{open:b,onOpenChange:f,children:[(0,n.jsx)(u,{asChild:!0,children:g}),(0,n.jsxs)(c.Cf,{className:"sm:max-w-[425px]",children:[(0,n.jsx)(c.c7,{children:(0,n.jsx)(p,{children:t?"Edit Product":"Add New Product"})}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault();let a={...N};if(!a.sku){let e=new Date().getTime().toString().slice(-6),l=Math.random().toString(36).substring(2,6).toUpperCase();a.sku="SKU-".concat(e,"-").concat(l)}v(a),f(!1),t||C({name:"",description:"",reference:"",sku:"",categoryId:"",brandId:"",sellPrice:0,buyPrice:0,quantity:0})},className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(h,{htmlFor:"name",children:"Product Name"}),(0,n.jsx)(i.p,{id:"name",value:N.name,onChange:e=>C({...N,name:e.target.value}),required:!0})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(h,{htmlFor:"reference",children:"Reference"}),(0,n.jsx)(i.p,{id:"reference",value:N.reference,onChange:e=>C({...N,reference:e.target.value}),placeholder:"Product reference code"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(h,{htmlFor:"sku",children:"SKU"}),(0,n.jsx)(i.p,{id:"sku",value:N.sku,onChange:e=>C({...N,sku:e.target.value}),placeholder:"Stock Keeping Unit (auto-generated if empty)"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(h,{htmlFor:"description",children:"Description"}),(0,n.jsx)(o.T,{id:"description",value:N.description,onChange:e=>C({...N,description:e.target.value}),placeholder:"Enter product description...",rows:3})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(h,{children:"Category"}),q?(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)(i.p,{placeholder:"New category name",value:P,onChange:e=>k(e.target.value)}),(0,n.jsx)(s.$,{type:"button",onClick:()=>{P.trim()&&(j(P.trim()),k(""),w(!1))},children:"Add"}),(0,n.jsx)(s.$,{type:"button",variant:"outline",onClick:()=>w(!1),children:"Cancel"})]}):(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)(d.Z,{value:N.categoryId,onValueChange:e=>C({...N,categoryId:e}),options:A,placeholder:"Select category",searchPlaceholder:"Search categories...",className:"flex-1"}),(0,n.jsx)(s.$,{type:"button",variant:"outline",onClick:()=>w(!0),children:"Add New"})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(h,{children:"Brand"}),F?(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)(i.p,{placeholder:"New brand name",value:S,onChange:e=>I(e.target.value)}),(0,n.jsx)(s.$,{type:"button",onClick:()=>{S.trim()&&(y(S.trim()),I(""),$(!1))},children:"Add"}),(0,n.jsx)(s.$,{type:"button",variant:"outline",onClick:()=>$(!1),children:"Cancel"})]}):(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)(d.Z,{value:N.brandId,onValueChange:e=>C({...N,brandId:e}),options:E,placeholder:"Select brand",searchPlaceholder:"Search brands...",className:"flex-1"}),(0,n.jsx)(s.$,{type:"button",variant:"outline",onClick:()=>$(!0),children:"Add New"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(h,{htmlFor:"buyPrice",children:"Buy Price"}),(0,n.jsx)(i.p,{id:"buyPrice",type:"number",step:"0.01",value:N.buyPrice,onChange:e=>C({...N,buyPrice:""===e.target.value?0:Number.parseFloat(e.target.value)}),required:!0})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(h,{htmlFor:"sellPrice",children:"Sell Price"}),(0,n.jsx)(i.p,{id:"sellPrice",type:"number",step:"0.01",value:N.sellPrice,onChange:e=>C({...N,sellPrice:""===e.target.value?0:Number.parseFloat(e.target.value)}),required:!0})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(h,{htmlFor:"quantity",children:"Quantity"}),(0,n.jsx)(i.p,{id:"quantity",type:"number",value:N.quantity,onChange:e=>C({...N,quantity:""===e.target.value?0:Number.parseInt(e.target.value)}),required:!0})]}),(0,n.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,n.jsx)(s.$,{type:"button",variant:"outline",onClick:()=>f(!1),children:"Cancel"}),(0,n.jsx)(s.$,{type:"submit",children:t?"Update":"Create"})]})]})]})]})}}}]);