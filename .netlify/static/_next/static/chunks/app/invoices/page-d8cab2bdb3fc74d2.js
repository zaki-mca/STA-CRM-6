(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3175],{12767:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]])},13052:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},13717:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},17649:(e,t,r)=>{"use strict";r.d(t,{UC:()=>M,VY:()=>R,ZD:()=>U,ZL:()=>q,bL:()=>I,hE:()=>B,hJ:()=>L,l9:()=>P,rc:()=>F});var a=r(12115),i=r(46081),n=r(6101),s=r(15452),d=r(85185),l=r(99708),o=r(95155),c="AlertDialog",[u,m]=(0,i.A)(c,[s.Hs]),p=(0,s.Hs)(),x=e=>{let{__scopeAlertDialog:t,...r}=e,a=p(t);return(0,o.jsx)(s.bL,{...a,...r,modal:!0})};x.displayName=c;var h=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,i=p(r);return(0,o.jsx)(s.l9,{...i,...a,ref:t})});h.displayName="AlertDialogTrigger";var v=e=>{let{__scopeAlertDialog:t,...r}=e,a=p(t);return(0,o.jsx)(s.ZL,{...a,...r})};v.displayName="AlertDialogPortal";var j=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,i=p(r);return(0,o.jsx)(s.hJ,{...i,...a,ref:t})});j.displayName="AlertDialogOverlay";var g="AlertDialogContent",[f,y]=u(g),b=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,children:i,...c}=e,u=p(r),m=a.useRef(null),x=(0,n.s)(t,m),h=a.useRef(null);return(0,o.jsx)(s.G$,{contentName:g,titleName:N,docsSlug:"alert-dialog",children:(0,o.jsx)(f,{scope:r,cancelRef:h,children:(0,o.jsxs)(s.UC,{role:"alertdialog",...u,...c,ref:x,onOpenAutoFocus:(0,d.m)(c.onOpenAutoFocus,e=>{var t;e.preventDefault(),null===(t=h.current)||void 0===t||t.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,o.jsx)(l.xV,{children:i}),(0,o.jsx)(D,{contentRef:m})]})})})});b.displayName=g;var N="AlertDialogTitle",w=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,i=p(r);return(0,o.jsx)(s.hE,{...i,...a,ref:t})});w.displayName=N;var _="AlertDialogDescription",k=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,i=p(r);return(0,o.jsx)(s.VY,{...i,...a,ref:t})});k.displayName=_;var A=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,i=p(r);return(0,o.jsx)(s.bm,{...i,...a,ref:t})});A.displayName="AlertDialogAction";var C="AlertDialogCancel",S=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,{cancelRef:i}=y(C,r),d=p(r),l=(0,n.s)(t,i);return(0,o.jsx)(s.bm,{...d,...a,ref:l})});S.displayName=C;var D=e=>{let{contentRef:t}=e,r="`".concat(g,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(g,"` by passing a `").concat(_,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(g,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return a.useEffect(()=>{var e;document.getElementById(null===(e=t.current)||void 0===e?void 0:e.getAttribute("aria-describedby"))||console.warn(r)},[r,t]),null},I=x,P=h,q=v,L=j,M=b,F=A,U=S,B=w,R=k},18603:(e,t,r)=>{Promise.resolve().then(r.bind(r,19829))},19829:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>P});var a=r(95155),i=r(12115),n=r(97168),s=r(89852),d=r(88524),l=r(88482),o=r(99840),c=r(16559),u=r(82714),m=r(49251),p=r(58642),x=r(9403),h=r(39675),v=r(68780),j=r(88145),g=r(95784),f=r(57434),y=r(69074);let b=(0,r(19946).A)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);var N=r(47924),w=r(55868);let _=o.L3;function k(e){var t,r,n,c,u,x,h,v;let{invoice:k,open:A,onOpenChange:C}=e,[S,D]=(0,i.useState)(""),[I,P]=(0,i.useState)(1),[q,L]=(0,i.useState)(5),[M,F]=(0,i.useState)(null),[U,B]=(0,i.useState)("all"),[R,Z]=(0,i.useState)("all");if(!k)return null;let z=e=>{let t="asc";M&&M.key===e&&"asc"===M.direction&&(t="desc"),F({key:e,direction:t})},E=[...(null===(t=k.items)||void 0===t?void 0:t.filter(e=>{var t,r,a,i,n,s,d,l,o,c,u,m,p,x;return(null===(t=(null==e?void 0:null===(r=e.product)||void 0===r?void 0:r.name)||(null==e?void 0:e.product_name)||"")||void 0===t?void 0:t.toLowerCase().includes(S.toLowerCase()))||(null===(a=(null==e?void 0:null===(i=e.product)||void 0===i?void 0:i.reference)||"")||void 0===a?void 0:a.toLowerCase().includes(S.toLowerCase()))||(null===(n=(null==e?void 0:null===(d=e.product)||void 0===d?void 0:null===(s=d.brand)||void 0===s?void 0:s.name)||"")||void 0===n?void 0:n.toLowerCase().includes(S.toLowerCase()))||(null===(l=(null==e?void 0:null===(c=e.product)||void 0===c?void 0:null===(o=c.category)||void 0===o?void 0:o.name)||"")||void 0===l?void 0:l.toLowerCase().includes(S.toLowerCase()))||"all"===U||(null==e?void 0:null===(m=e.product)||void 0===m?void 0:null===(u=m.category)||void 0===u?void 0:u.name)===U||"all"===R||(null==e?void 0:null===(x=e.product)||void 0===x?void 0:null===(p=x.brand)||void 0===p?void 0:p.name)===R}))||[]].sort((e,t)=>{var r,a,i,n,s,d,l,o,c,u,m,p;let x,h;if(!M)return 0;switch(M.key){case"name":x=(null===(r=e.product)||void 0===r?void 0:r.name)||e.product_name||"",h=(null===(a=t.product)||void 0===a?void 0:a.name)||t.product_name||"";break;case"description":x=(null===(i=e.product)||void 0===i?void 0:i.description)||"",h=(null===(n=t.product)||void 0===n?void 0:n.description)||"";break;case"category":x=(null===(d=e.product)||void 0===d?void 0:null===(s=d.category)||void 0===s?void 0:s.name)||e.category_name||"",h=(null===(o=t.product)||void 0===o?void 0:null===(l=o.category)||void 0===l?void 0:l.name)||t.category_name||"";break;case"brand":x=(null===(u=e.product)||void 0===u?void 0:null===(c=u.brand)||void 0===c?void 0:c.name)||e.brand_name||"",h=(null===(p=t.product)||void 0===p?void 0:null===(m=p.brand)||void 0===m?void 0:m.name)||t.brand_name||"";break;case"quantity":x=e.quantity||0,h=t.quantity||0;break;case"unitPrice":x=e.unitPrice||e.unit_price||0,h=t.unitPrice||t.unit_price||0;break;case"total":x=e.total||e.quantity*(e.unitPrice||e.unit_price||0)||0,h=t.total||t.quantity*(t.unitPrice||t.unit_price||0)||0;break;default:return 0}return x<h?"asc"===M.direction?-1:1:x>h?"asc"===M.direction?1:-1:0}),O=Math.ceil(E.length/q),T=(I-1)*q;E.slice(T,T+q);let $=[...new Set((null===(r=k.items)||void 0===r?void 0:r.map(e=>{var t,r;return(null==e?void 0:null===(r=e.product)||void 0===r?void 0:null===(t=r.category)||void 0===t?void 0:t.name)||(null==e?void 0:e.category_name)||"Uncategorized"}))||["Uncategorized"])],V=[...new Set((null===(n=k.items)||void 0===n?void 0:n.map(e=>{var t,r;return(null==e?void 0:null===(r=e.product)||void 0===r?void 0:null===(t=r.brand)||void 0===t?void 0:t.name)||(null==e?void 0:e.brand_name)||"Unbranded"}))||["Unbranded"])],H=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString()}catch(e){return"Invalid Date"}},K={name:(null===(u=k.provider)||void 0===u?void 0:u.name)||k.provider_name||"Unknown Provider",email:(null===(x=k.provider)||void 0===x?void 0:x.email)||k.provider_email||"N/A",phone:(null===(h=k.provider)||void 0===h?void 0:h.phoneNumber)||k.provider_phone||"N/A",address:(null===(v=k.provider)||void 0===v?void 0:v.address)||k.provider_address||"N/A"};return(0,a.jsx)(o.lG,{open:A,onOpenChange:C,children:(0,a.jsxs)(o.Cf,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(o.c7,{children:(0,a.jsx)(_,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(f.A,{className:"h-5 w-5"}),(0,a.jsxs)("span",{children:["Invoice Details: ",k.invoice_number||k.invoiceNumber||k.id]})]})})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{children:"Invoice Information"})}),(0,a.jsxs)(l.Wu,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Invoice Number"}),(0,a.jsx)("p",{className:"text-lg font-semibold",children:k.invoice_number||k.invoiceNumber||k.id})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),(0,a.jsx)(j.E,{className:(e=>{switch(e){case"draft":default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200";case"sent":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"paid":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"overdue":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}})(k.status),children:k.status.charAt(0).toUpperCase()+k.status.slice(1)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Created Date"}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(y.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{children:H(k.date||k.createdAt)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Due Date"}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(y.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{children:H(k.due_date||k.dueDate)})]})]})]})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)(l.ZB,{className:"flex items-center space-x-2",children:[(0,a.jsx)(b,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Provider Details"})]})}),(0,a.jsxs)(l.Wu,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Provider Name"}),(0,a.jsx)("p",{className:"text-lg font-semibold",children:K.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),(0,a.jsx)("p",{children:K.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),(0,a.jsx)("p",{children:K.phone})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Address"}),(0,a.jsx)("p",{children:K.address})]})]})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Invoice Items"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 flex-1",children:[(0,a.jsx)(N.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)(s.p,{placeholder:"Search items...",value:S,onChange:e=>D(e.target.value),className:"max-w-sm"})]}),(0,a.jsxs)(g.l6,{value:U,onValueChange:B,children:[(0,a.jsx)(g.bq,{className:"w-full sm:w-[180px]",children:(0,a.jsx)(g.yv,{placeholder:"Filter by category"})}),(0,a.jsxs)(g.gC,{children:[(0,a.jsx)(g.eb,{value:"all",children:"All Categories"}),$.map(e=>(0,a.jsx)(g.eb,{value:e,children:e},e))]})]}),(0,a.jsxs)(g.l6,{value:R,onValueChange:Z,children:[(0,a.jsx)(g.bq,{className:"w-full sm:w-[180px]",children:(0,a.jsx)(g.yv,{placeholder:"Filter by brand"})}),(0,a.jsxs)(g.gC,{children:[(0,a.jsx)(g.eb,{value:"all",children:"All Brands"}),V.map(e=>(0,a.jsx)(g.eb,{value:e,children:e},e))]})]})]})]}),(0,a.jsxs)(l.Wu,{children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(d.XI,{children:[(0,a.jsx)(d.A0,{children:(0,a.jsxs)(d.Hj,{children:[(0,a.jsx)(p.a,{sortKey:"name",currentSort:M,onSort:z,children:"Product"}),(0,a.jsx)(p.a,{sortKey:"description",currentSort:M,onSort:z,children:"Description"}),(0,a.jsx)(d.nd,{children:"Reference"}),(0,a.jsx)(p.a,{sortKey:"brand",currentSort:M,onSort:z,children:"Brand"}),(0,a.jsx)(p.a,{sortKey:"category",currentSort:M,onSort:z,children:"Category"}),(0,a.jsx)(p.a,{sortKey:"quantity",currentSort:M,onSort:z,children:"Quantity"}),(0,a.jsx)(p.a,{sortKey:"unitPrice",currentSort:M,onSort:z,children:"Unit Price"}),(0,a.jsx)(p.a,{sortKey:"total",currentSort:M,onSort:z,children:"Total"})]})}),(0,a.jsx)(d.BF,{children:null===(c=k.items)||void 0===c?void 0:c.map(e=>{var t,r,i,n,s,l,o;return(0,a.jsxs)(d.Hj,{children:[(0,a.jsx)(d.nA,{className:"font-medium",children:(null===(t=e.product)||void 0===t?void 0:t.name)||e.product_name||"Unknown Product"}),(0,a.jsx)(d.nA,{className:"max-w-xs truncate",children:(null===(r=e.product)||void 0===r?void 0:r.description)||"N/A"}),(0,a.jsx)(d.nA,{className:"font-mono text-sm",children:(null===(i=e.product)||void 0===i?void 0:i.reference)||e.reference||"N/A"}),(0,a.jsx)(d.nA,{children:(null===(s=e.product)||void 0===s?void 0:null===(n=s.brand)||void 0===n?void 0:n.name)||e.brand_name||"Unbranded"}),(0,a.jsx)(d.nA,{children:(0,a.jsx)(j.E,{variant:"secondary",children:(null===(o=e.product)||void 0===o?void 0:null===(l=o.category)||void 0===l?void 0:l.name)||e.category_name||"Uncategorized"})}),(0,a.jsx)(d.nA,{children:e.quantity}),(0,a.jsxs)(d.nA,{children:["number"==typeof e.unitPrice?e.unitPrice.toFixed(2):"number"==typeof e.unit_price?e.unit_price.toFixed(2):"0.00"," DZD"]}),(0,a.jsxs)(d.nA,{className:"font-semibold",children:["number"==typeof e.total?e.total.toFixed(2):(e.quantity*(e.unitPrice||e.unit_price||0)).toFixed(2)," ","DZD"]})]},e.id)})})]})}),E.length>q&&(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(m.d,{currentPage:I,totalPages:O,pageSize:q,totalItems:E.length,onPageChange:P,onPageSizeChange:e=>{L(e),P(1)}})})]})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)(l.ZB,{className:"flex items-center space-x-2",children:[(0,a.jsx)(w.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Invoice Summary"})]})}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Subtotal"}),(0,a.jsxs)("span",{children:[Number(k.subtotal||0).toFixed(2)," DZD"]})]}),k.tax_rate&&(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"text-muted-foreground",children:["Tax (",k.tax_rate,"%)"]}),(0,a.jsxs)("span",{children:[(Number(k.subtotal||0)*(Number(k.tax_rate)/100)).toFixed(2)," DZD"]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center pt-2 border-t font-medium text-lg",children:[(0,a.jsx)("span",{children:"Total"}),(0,a.jsxs)("span",{children:[Number(k.total||0).toFixed(2)," DZD"]})]})]})})]})]})]})})}var A=r(79159),C=r(84616),S=r(62525),D=r(92657),I=r(13717);function P(){let{data:e,addInvoice:t,updateInvoice:r,deleteInvoice:j,addProduct:f,addCategory:y,addBrand:b,addProvider:w,updateInvoiceStatus:_}=(0,A.m)(),[P,q]=(0,i.useState)(""),[L,M]=(0,i.useState)(1),[F,U]=(0,i.useState)(10),[B,R]=(0,i.useState)(null),[Z,z]=(0,i.useState)(!1),[E,O]=(0,i.useState)(!1),[T,$]=(0,i.useState)(null),[V,H]=(0,i.useState)(null),[K,J]=(0,i.useState)(!1),[G,W]=(0,i.useState)({providerId:"",items:[],dueDate:""}),[Q,Y]=(0,i.useState)(!1),X=e=>{let t="asc";B&&B.key===e&&"asc"===B.direction&&(t="desc"),R({key:e,direction:t})},ee=[...(e.invoices||[]).map(e=>{if(!e||"object"!=typeof e)return console.error("Invalid invoice data:",e),null;try{return console.log("Raw invoice data:",e.invoice_number,"Items:",e.items?e.items.length:0),{id:e.id||"",invoice_number:e.invoice_number||"INV-".concat((e.id||"").substring(0,8)),provider_id:e.provider_id||"",provider_name:e.provider_name||"Default Provider",provider_email:e.provider_email||"",provider_phone:e.provider_phone||"",provider_address:e.provider_address||"",items:Array.isArray(e.items)?e.items.map(e=>({id:e.id||"",product_id:e.product_id||"",product_name:e.product_name||"",product_description:e.product_description||"",quantity:e.quantity||0,unit_price:e.unit_price||0,discount:e.discount||0,total:e.total||e.quantity*e.unit_price,sku:e.sku||"",reference:e.reference||"",category_id:e.category_id||"",category_name:e.category_name||"",brand_id:e.brand_id||"",brand_name:e.brand_name||""})):[],subtotal:e.subtotal||0,total:e.total||0,status:e.status||"draft",tax_rate:e.tax_rate||0,date:e.date||"",due_date:e.due_date||"",notes:e.notes||"",created_at:e.created_at||new Date().toISOString(),updated_at:e.updated_at||new Date().toISOString()}}catch(e){return console.error("Error transforming invoice:",e),null}}).filter(Boolean).filter(e=>{var t,r;return e&&(((null===(t=e.invoice_number)||void 0===t?void 0:t.toLowerCase())||"").includes(P.toLowerCase())||e.id.toLowerCase().includes(P.toLowerCase())||((null===(r=e.provider_name)||void 0===r?void 0:r.toLowerCase())||"").includes(P.toLowerCase()))})].sort((e,t)=>{if(!B||!e||!t)return 0;let r=e[B.key],a=t[B.key];if(B.key.includes(".")){let i=B.key.split(".");r=i.reduce((e,t)=>e&&e[t],e),a=i.reduce((e,t)=>e&&e[t],t)}return(null==r&&(r=""),null==a&&(a=""),r<a)?"asc"===B.direction?-1:1:r>a?"asc"===B.direction?1:-1:0}),et=Math.ceil(ee.length/F),er=(L-1)*F,ea=ee.slice(er,er+F),ei=e=>{H(e),J(!0)},en=e.products.map(e=>{var t,r;return{value:e.id,label:e.name,price:e.sellPrice,category:(null===(t=e.category)||void 0===t?void 0:t.name)||"Uncategorized",brand:(null===(r=e.brand)||void 0===r?void 0:r.name)||"Unbranded",description:e.description}}),es=e.providers.map(e=>({value:e.id,label:e.name,email:e.email})),ed=()=>{W({...G,items:[...G.items,{productId:"",quantity:1,unitPrice:0,discount:0}]})},el=e=>{W({...G,items:G.items.filter((t,r)=>r!==e)})},eo=(t,r,a)=>{let i=[...G.items];if(i[t]={...i[t],[r]:a},"productId"===r){let r=e.products.find(e=>e.id===a);r&&(i[t].unitPrice=r.sellPrice)}W({...G,items:i})},ec=e=>{f(e);let t=Date.now().toString();W({...G,items:[...G.items,{productId:t,quantity:1,unitPrice:e.sellPrice}]})},eu=e=>{w(e);let t=Date.now().toString();W({...G,providerId:t})},em=()=>{let a=e.providers.find(e=>e.id===G.providerId);if(!a){console.error("No provider selected. Provider ID:",G.providerId),console.log("Available providers:",e.providers),alert("Please select a provider");return}if(0===G.items.length){console.error("No items added to invoice"),alert("Please add at least one item to the invoice");return}console.log("Creating invoice with provider:",a);let i=G.items.map((t,r)=>{var a,i,n,s;let d=e.products.find(e=>e.id===t.productId);return d?{id:"temp-".concat(r),product_id:d.id,product_name:d.name,product_description:d.description||"",category_id:(null===(a=d.category)||void 0===a?void 0:a.id)||"",category_name:(null===(i=d.category)||void 0===i?void 0:i.name)||"Uncategorized",brand_id:(null===(n=d.brand)||void 0===n?void 0:n.id)||"",brand_name:(null===(s=d.brand)||void 0===s?void 0:s.name)||"Unbranded",quantity:t.quantity,unit_price:t.unitPrice,discount:0,total:t.quantity*t.unitPrice,sku:d.sku||"",reference:d.reference||""}:(console.error("Product not found for ID ".concat(t.productId)),null)}).filter(Boolean);if(0===i.length){console.error("No valid items found after product lookup"),alert("Error with product data. Please try again.");return}console.log("Invoice items:",i);let n=i.reduce((e,t)=>e+t.total,0),s={provider_id:a.id,provider_name:a.name,provider_email:a.email,provider_phone:a.phoneNumber,provider_address:a.address,items:i,subtotal:n,total:n,status:"draft",date:new Date().toISOString().split("T")[0],due_date:G.dueDate?new Date(G.dueDate).toISOString().split("T")[0]:void 0,notes:"",tax_rate:0};console.log("Final invoice object to be sent to server:",s);try{T&&Q?(console.log("Updating existing invoice",T.id),r(T.id,s).then(()=>{console.log("Invoice updated successfully"),W({providerId:"",items:[],dueDate:""}),z(!1),Y(!1)}).catch(e=>{console.error("Error updating invoice:",e),alert("Failed to update invoice: ".concat(e.message))})):(console.log("Creating new invoice"),t(s).then(()=>{console.log("Invoice created successfully"),W({providerId:"",items:[],dueDate:""}),z(!1),Y(!1)}).catch(e=>{console.error("Error creating invoice:",e),alert("Failed to create invoice: ".concat(e.message))}))}catch(e){console.error("Error in invoice operation:",e),alert("An error occurred: ".concat(e instanceof Error?e.message:"Unknown error"))}},ep=t=>{let{isEditForm:i=!1}=t;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.J,{children:"Provider"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(v.Z,{value:G.providerId,onValueChange:e=>W({...G,providerId:e}),options:es,placeholder:"Select provider",searchPlaceholder:"Search providers by name or email...",className:"flex-1"}),(0,a.jsx)(h.Q,{onSubmit:eu,trigger:(0,a.jsx)(n.$,{type:"button",variant:"outline",children:"Add New"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.J,{children:"Due Date"}),(0,a.jsx)(s.p,{type:"date",value:G.dueDate,onChange:e=>W({...G,dueDate:e.target.value})})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Invoice Items"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(n.$,{onClick:ed,variant:"outline",children:"Add Existing Product"}),(0,a.jsx)(x.i,{categories:e.categories,brands:e.brands,onSubmit:ec,onAddCategory:y,onAddBrand:b,trigger:(0,a.jsxs)(n.$,{variant:"outline",children:[(0,a.jsx)(C.A,{className:"mr-2 h-4 w-4"}),"Add New Product"]})})]})]}),G.items.map((e,t)=>(0,a.jsxs)("div",{className:"grid grid-cols-5 gap-4 p-4 border rounded-lg",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.J,{children:"Product"}),(0,a.jsx)(v.Z,{value:e.productId,onValueChange:e=>eo(t,"productId",e),options:en,placeholder:"Select product",searchPlaceholder:"Search by name, brand, or category..."})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.J,{children:"Quantity"}),(0,a.jsx)(s.p,{type:"number",min:"1",value:e.quantity,onChange:e=>eo(t,"quantity",Math.max(1,Number.parseInt(e.target.value)||1))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.J,{children:"Unit Price"}),(0,a.jsx)(s.p,{type:"number",step:"0.01",min:"0",value:e.unitPrice,onChange:e=>eo(t,"unitPrice",Number.parseFloat(e.target.value)||0)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.J,{children:"Discount (%)"}),(0,a.jsx)(s.p,{type:"number",min:"0",max:"100",step:"0.1",value:e.discount||0,onChange:e=>eo(t,"discount",Math.min(100,Math.max(0,Number.parseFloat(e.target.value)||0)))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.J,{children:"Total"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("span",{className:"text-lg font-medium",children:[((e.quantity||0)*(e.unitPrice||0)*(1-(e.discount||0)/100)).toFixed(2)," DZD"]}),(0,a.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>el(t),type:"button",children:(0,a.jsx)(S.A,{className:"h-4 w-4"})})]})]})]},t)),G.items.length>0&&(0,a.jsx)("div",{className:"border-t pt-4",children:(0,a.jsx)("div",{className:"flex justify-end space-y-2",children:(0,a.jsxs)("div",{className:"w-64 space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Subtotal:"}),(0,a.jsxs)("span",{children:[G.items.reduce((e,t)=>e+(t.quantity||0)*(t.unitPrice||0)*(1-(t.discount||0)/100),0).toFixed(2)," DZD"]})]}),(0,a.jsxs)("div",{className:"flex justify-between font-bold text-lg border-t pt-2",children:[(0,a.jsx)("span",{children:"Total:"}),(0,a.jsxs)("span",{children:[G.items.reduce((e,t)=>e+(t.quantity||0)*(t.unitPrice||0)*(1-(t.discount||0)/100),0).toFixed(2)," DZD"]})]})]})})})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(n.$,{variant:"outline",onClick:()=>{i?(O(!1),$(null)):z(!1),W({providerId:"",items:[],dueDate:""}),Y(!1)},children:"Cancel"}),(0,a.jsx)(n.$,{onClick:()=>{if(i){let t=e.providers.find(e=>e.id===G.providerId);if(!t||0===G.items.length)return;let a=G.items.map((t,r)=>{var a,i,n,s;let d=e.products.find(e=>e.id===t.productId);return{id:"temp-".concat(r),product_id:d.id,product_name:d.name,product_description:d.description||"",category_id:(null===(a=d.category)||void 0===a?void 0:a.id)||"",category_name:(null===(i=d.category)||void 0===i?void 0:i.name)||"Uncategorized",brand_id:(null===(n=d.brand)||void 0===n?void 0:n.id)||"",brand_name:(null===(s=d.brand)||void 0===s?void 0:s.name)||"Unbranded",quantity:t.quantity,unit_price:Math.max(.01,t.unitPrice),discount:0,total:t.quantity*Math.max(.01,t.unitPrice),sku:d.sku||"",reference:d.reference||""}}),i=a.reduce((e,t)=>e+t.total,0),n={provider_id:t.id,provider_name:t.name,provider_email:t.email,provider_phone:t.phoneNumber,provider_address:t.address,items:a,subtotal:i,total:i,status:"draft",date:new Date().toISOString().split("T")[0],due_date:G.dueDate?new Date(G.dueDate).toISOString().split("T")[0]:void 0,notes:T.notes||"",tax_rate:T.tax_rate||0};r(T.id,n),W({providerId:"",items:[],dueDate:""}),O(!1),$(null)}else em()},disabled:!G.providerId||0===G.items.length,children:i?"Update Invoice":"Create Invoice"})]})]})};return(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Invoices"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage your billing and invoices"})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)(l.ZB,{children:"All Invoices"}),(0,a.jsxs)(o.lG,{open:Z,onOpenChange:z,children:[(0,a.jsx)(o.zM,{asChild:!0,children:(0,a.jsxs)(n.$,{children:[(0,a.jsx)(C.A,{className:"mr-2 h-4 w-4"}),"Create Invoice"]})}),(0,a.jsxs)(o.Cf,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(o.c7,{children:(0,a.jsx)(o.L3,{children:"Create New Invoice"})}),(0,a.jsx)(ep,{})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(N.A,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)(s.p,{placeholder:"Search invoices...",value:P,onChange:e=>q(e.target.value),className:"max-w-sm"})]})]}),(0,a.jsxs)(l.Wu,{children:[(0,a.jsxs)(d.XI,{children:[(0,a.jsx)(d.A0,{children:(0,a.jsxs)(d.Hj,{children:[(0,a.jsx)(p.a,{sortKey:"invoice_number",currentSort:B,onSort:X,children:"Invoice #"}),(0,a.jsx)(p.a,{sortKey:"provider_name",currentSort:B,onSort:X,children:"Provider"}),(0,a.jsx)(d.nd,{children:"Items"}),(0,a.jsx)(p.a,{sortKey:"total",currentSort:B,onSort:X,children:"Total"}),(0,a.jsx)(d.nd,{children:"Status"}),(0,a.jsx)(p.a,{sortKey:"created_at",currentSort:B,onSort:X,children:"Created"}),(0,a.jsx)(p.a,{sortKey:"due_date",currentSort:B,onSort:X,children:"Due Date"}),(0,a.jsx)(d.nd,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(d.BF,{children:ea.map(e=>{var t;return e&&(0,a.jsxs)(d.Hj,{children:[(0,a.jsx)(d.nA,{className:"font-medium",children:e.invoice_number||e.id}),(0,a.jsx)(d.nA,{children:e.provider_name||"Default Provider"}),(0,a.jsxs)(d.nA,{children:[(null===(t=e.items)||void 0===t?void 0:t.length)||0," items"]}),(0,a.jsxs)(d.nA,{children:["number"==typeof e.total?e.total.toFixed(2):Number(e.total||0).toFixed(2)," DZD"]}),(0,a.jsx)(d.nA,{children:(0,a.jsxs)(g.l6,{value:e.status,onValueChange:t=>_(e.id,t),children:[(0,a.jsx)(g.bq,{className:"w-32",children:(0,a.jsx)(g.yv,{})}),(0,a.jsxs)(g.gC,{children:[(0,a.jsx)(g.eb,{value:"draft",children:"Draft"}),(0,a.jsx)(g.eb,{value:"sent",children:"Sent"}),(0,a.jsx)(g.eb,{value:"paid",children:"Paid"}),(0,a.jsx)(g.eb,{value:"overdue",children:"Overdue"})]})]})}),(0,a.jsx)(d.nA,{children:e.created_at?"string"==typeof e.created_at?new Date(e.created_at).toLocaleDateString():e.created_at instanceof Date?e.created_at.toLocaleDateString():"Unknown":"Unknown"}),(0,a.jsx)(d.nA,{children:e.due_date?"string"==typeof e.due_date?new Date(e.due_date).toLocaleDateString():e.due_date instanceof Date?e.due_date.toLocaleDateString():"N/A":"N/A"}),(0,a.jsx)(d.nA,{className:"text-right",children:(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>ei(e),children:(0,a.jsx)(D.A,{className:"h-4 w-4"})}),(0,a.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>{var t;$(e),W({providerId:e.provider_id||"",items:(null===(t=e.items)||void 0===t?void 0:t.map(e=>({productId:e.product_id||"",quantity:e.quantity||0,unitPrice:e.unit_price||0})))||[],dueDate:e.due_date?"string"==typeof e.due_date?e.due_date.split("T")[0]:e.due_date instanceof Date?e.due_date.toISOString().split("T")[0]:"":""}),O(!0),Y(!0)},children:(0,a.jsx)(I.A,{className:"h-4 w-4"})}),(0,a.jsxs)(c.Lt,{children:[(0,a.jsx)(c.tv,{asChild:!0,children:(0,a.jsx)(n.$,{variant:"outline",size:"sm",children:(0,a.jsx)(S.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(c.EO,{children:[(0,a.jsxs)(c.wd,{children:[(0,a.jsx)(c.r7,{children:"Are you absolutely sure?"}),(0,a.jsxs)(c.$v,{children:["This will permanently delete invoice #",e.invoice_number,". This action cannot be undone."]})]}),(0,a.jsxs)(c.ck,{children:[(0,a.jsx)(c.Zr,{children:"Cancel"}),(0,a.jsx)(c.Rx,{onClick:()=>j(e.id),children:"Delete"})]})]})]})]})})]},e.id)})})]}),(0,a.jsx)(m.d,{currentPage:L,totalPages:et,pageSize:F,totalItems:ee.length,onPageChange:M,onPageSizeChange:e=>{U(e),M(1)}})]})]}),(0,a.jsx)(k,{invoice:V,open:K,onOpenChange:J}),(0,a.jsx)(o.lG,{open:E,onOpenChange:O,children:(0,a.jsxs)(o.Cf,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(o.c7,{children:(0,a.jsxs)(o.L3,{children:["Edit Invoice: ",(null==T?void 0:T.invoice_number)||(null==T?void 0:T.id)]})}),(0,a.jsx)(ep,{isEditForm:!0})]})})]})}},21492:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]])},39675:(e,t,r)=>{"use strict";r.d(t,{Q:()=>p});var a=r(95155),i=r(12115),n=r(97168),s=r(89852),d=r(82714),l=r(99474),o=r(99840);let c=o.zM,u=o.L3,m=d.J;function p(e){let{provider:t,onSubmit:r,trigger:d}=e,[p,x]=(0,i.useState)(!1),[h,v]=(0,i.useState)({name:(null==t?void 0:t.name)||"",email:(null==t?void 0:t.email)||"",address:(null==t?void 0:t.address)||"",phoneNumber:(null==t?void 0:t.phoneNumber)||""});return(0,a.jsxs)(o.lG,{open:p,onOpenChange:x,children:[(0,a.jsx)(c,{asChild:!0,children:d}),(0,a.jsxs)(o.Cf,{className:"sm:max-w-[425px]",children:[(0,a.jsx)(o.c7,{children:(0,a.jsx)(u,{children:t?"Edit Provider":"Add New Provider"})}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r(h),x(!1),t||v({name:"",email:"",address:"",phoneNumber:""})},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m,{htmlFor:"name",children:"Name"}),(0,a.jsx)(s.p,{id:"name",value:h.name,onChange:e=>v({...h,name:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m,{htmlFor:"email",children:"Email"}),(0,a.jsx)(s.p,{id:"email",type:"email",value:h.email,onChange:e=>v({...h,email:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m,{htmlFor:"address",children:"Address"}),(0,a.jsx)(l.T,{id:"address",value:h.address,onChange:e=>v({...h,address:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m,{htmlFor:"phoneNumber",children:"Phone Number"}),(0,a.jsx)(s.p,{id:"phoneNumber",value:h.phoneNumber,onChange:e=>v({...h,phoneNumber:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(n.$,{type:"button",variant:"outline",onClick:()=>x(!1),children:"Cancel"}),(0,a.jsx)(n.$,{type:"submit",children:t?"Update":"Create"})]})]})]})]})}},39881:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]])},42355:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},52278:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]])},55868:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},57434:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},58832:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]])},62525:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},68780:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var a=r(95155),i=r(12115),n=r(97168),s=r(20547),d=r(53999);let l=s.bL,o=s.l9,c=i.forwardRef((e,t)=>{let{className:r,align:i="center",sideOffset:n=4,...l}=e;return(0,a.jsx)(s.ZL,{children:(0,a.jsx)(s.UC,{ref:t,align:i,sideOffset:n,className:(0,d.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...l})})});c.displayName=s.UC.displayName;var u=r(77740),m=r(47924);r(99840);let p=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,a.jsx)(u.uB,{ref:t,className:(0,d.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",r),...i})});p.displayName=u.uB.displayName;let x=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,a.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,a.jsx)(u.uB.Input,{ref:t,className:(0,d.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",r),...i})]})});x.displayName=u.uB.Input.displayName;let h=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,a.jsx)(u.uB.List,{ref:t,className:(0,d.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",r),...i})});h.displayName=u.uB.List.displayName;let v=i.forwardRef((e,t)=>(0,a.jsx)(u.uB.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));v.displayName=u.uB.Empty.displayName;let j=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,a.jsx)(u.uB.Group,{ref:t,className:(0,d.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",r),...i})});j.displayName=u.uB.Group.displayName,i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,a.jsx)(u.uB.Separator,{ref:t,className:(0,d.cn)("-mx-1 h-px bg-border",r),...i})}).displayName=u.uB.Separator.displayName;let g=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,a.jsx)(u.uB.Item,{ref:t,className:(0,d.cn)("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r),...i})});g.displayName=u.uB.Item.displayName;var f=r(10081),y=r(5196);function b(e){let{value:t,onValueChange:r,options:s,placeholder:u,searchPlaceholder:m,className:b}=e,[N,w]=(0,i.useState)(!1),[_,k]=(0,i.useState)(""),A=s.find(e=>e.value===t),C=s.filter(e=>{let t=_.toLowerCase();return e.label.toLowerCase().includes(t)||e.category&&e.category.toLowerCase().includes(t)||e.brand&&e.brand.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t)||e.email&&e.email.toLowerCase().includes(t)||e.domain&&e.domain.toLowerCase().includes(t)});return(0,a.jsxs)(l,{open:N,onOpenChange:w,children:[(0,a.jsx)(o,{asChild:!0,children:(0,a.jsxs)(n.$,{variant:"outline",role:"combobox","aria-expanded":N,className:(0,d.cn)("w-full justify-between",b),children:[A?A.label:u,(0,a.jsx)(f.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,a.jsx)(c,{className:"w-full p-0",align:"start",children:(0,a.jsxs)(p,{shouldFilter:!1,children:[(0,a.jsx)(x,{placeholder:m,value:_,onValueChange:k}),(0,a.jsxs)(h,{children:[(0,a.jsx)(v,{children:"No item found."}),(0,a.jsx)(j,{className:"max-h-64 overflow-auto",children:C.map(e=>(0,a.jsxs)(g,{value:e.value,onSelect:e=>{r(e===t?"":e),w(!1),k("")},children:[(0,a.jsx)(y.A,{className:(0,d.cn)("mr-2 h-4 w-4",t===e.value?"opacity-100":"opacity-0")}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium",children:e.label}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.category&&(0,a.jsx)("span",{className:"bg-gray-100 px-2 py-0.5 rounded text-xs",children:e.category}),e.brand&&(0,a.jsx)("span",{className:"bg-blue-100 px-2 py-0.5 rounded text-xs",children:e.brand}),e.email&&(0,a.jsx)("span",{className:"text-blue-600",children:e.email}),e.domain&&(0,a.jsx)("span",{className:"bg-green-100 px-2 py-0.5 rounded text-xs",children:e.domain}),void 0!==e.price&&"number"==typeof e.price&&(0,a.jsxs)("span",{className:"font-medium text-green-600",children:["$",e.price.toFixed(2)]})]})]})]},e.value))})]})]})})]})}},69074:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},92657:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},99474:(e,t,r)=>{"use strict";r.d(t,{T:()=>s});var a=r(95155),i=r(12115),n=r(53999);let s=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,a.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...i})});s.displayName="Textarea"}},e=>{var t=t=>e(e.s=t);e.O(0,[4277,8543,4692,4810,203,3958,697,4710,9403,8441,1684,7358],()=>t(18603)),_N_E=e.O()}]);