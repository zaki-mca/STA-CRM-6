(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2379],{55414:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>y});var l=a(95155),n=a(12115),r=a(97168),c=a(89852),t=a(88524),i=a(88482),d=a(99840),o=a(82714),h=a(16559),x=a(79159),m=a(84616),u=a(89917),j=a(62525),g=a(38543),p=a(30129);function y(){let{data:e,addCategory:s,updateCategory:a,deleteCategory:y,refreshData:C}=(0,x.m)(),[N,f]=(0,n.useState)(""),[v,w]=(0,n.useState)({name:""}),[k,b]=(0,n.useState)(null),[R,A]=(0,n.useState)(!1),[E,S]=(0,n.useState)(!1),[$,F]=(0,n.useState)(null),O=e.categories.filter(e=>e.name.toLowerCase().includes(N.toLowerCase())),_=async()=>{try{if(!v.name){g.oR.error("Category name is required");return}await s(v.name),g.oR.success("Category added successfully"),w({name:""}),A(!1)}catch(e){g.oR.error("Failed to add category: ".concat(e.message))}},L=async()=>{try{if(!k||!k.name){g.oR.error("Category name is required");return}await a(k.id,{name:k.name,description:k.description||""}),g.oR.success("Category updated successfully"),b(null),S(!1)}catch(e){g.oR.error("Failed to update category: ".concat(e.message))}},P=async()=>{try{if(!$)return;await y($.id),g.oR.success("Category deleted successfully"),F(null)}catch(e){g.oR.error("Failed to delete category: ".concat(e.message))}};return(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold",children:"Product Categories"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:"Manage your product categories"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,l.jsx)("div",{className:"flex items-center gap-4 w-full max-w-sm",children:(0,l.jsx)(c.p,{placeholder:"Search categories...",value:N,onChange:e=>f(e.target.value),className:"max-w-sm"})}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(p.e,{apiEndpoint:"".concat("http://localhost:5000/api","/categories/bulk-upload"),entityType:"category",onUploadSuccess:e=>{0===e.length?g.oR.info("No new categories were added",{position:"top-right",autoClose:5e3}):g.oR.success((0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"font-semibold mb-1",children:["Successfully uploaded ",e.length," ",1===e.length?"category":"categories"]}),(0,l.jsxs)("ul",{className:"list-disc pl-4 mt-1 text-sm max-h-32 overflow-auto",children:[e.slice(0,5).map((e,s)=>(0,l.jsx)("li",{children:e.name},s)),e.length>5&&(0,l.jsxs)("li",{children:["...and ",e.length-5," more"]})]})]}),{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});let s=C();g.oR.promise(s,{pending:"Updating categories list...",success:"Categories list refreshed successfully!",error:"Failed to refresh categories"},{position:"top-right",autoClose:3e3})}}),(0,l.jsxs)(d.lG,{open:R,onOpenChange:A,children:[(0,l.jsx)(d.zM,{asChild:!0,children:(0,l.jsxs)(r.$,{className:"gap-1",children:[(0,l.jsx)(m.A,{className:"h-4 w-4"}),"Add Category"]})}),(0,l.jsxs)(d.Cf,{children:[(0,l.jsx)(d.c7,{children:(0,l.jsx)(d.L3,{children:"Add New Category"})}),(0,l.jsx)("div",{className:"space-y-4 py-4",children:(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(o.J,{htmlFor:"name",children:"Category Name"}),(0,l.jsx)(c.p,{id:"name",placeholder:"Enter category name",value:v.name,onChange:e=>w({...v,name:e.target.value})})]})}),(0,l.jsxs)(d.Es,{children:[(0,l.jsx)(r.$,{variant:"outline",onClick:()=>A(!1),children:"Cancel"}),(0,l.jsx)(r.$,{onClick:_,children:"Save Category"})]})]})]})]})]}),(0,l.jsxs)(i.Zp,{children:[(0,l.jsx)(i.aR,{children:(0,l.jsx)(i.ZB,{children:"Categories"})}),(0,l.jsx)(i.Wu,{children:O.length>0?(0,l.jsxs)(t.XI,{children:[(0,l.jsx)(t.A0,{children:(0,l.jsxs)(t.Hj,{children:[(0,l.jsx)(t.nd,{children:"Name"}),(0,l.jsx)(t.nd,{children:"Products Count"}),(0,l.jsx)(t.nd,{className:"text-right",children:"Actions"})]})}),(0,l.jsx)(t.BF,{children:O.map(s=>{let a=e.products.filter(e=>e.category&&e.category.id===s.id).length;return(0,l.jsxs)(t.Hj,{children:[(0,l.jsx)(t.nA,{className:"font-medium",children:s.name}),(0,l.jsx)(t.nA,{children:a}),(0,l.jsx)(t.nA,{className:"text-right",children:(0,l.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,l.jsxs)(r.$,{variant:"outline",size:"sm",onClick:()=>{b(s),S(!0)},children:[(0,l.jsx)(u.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"Edit"})]}),(0,l.jsxs)(h.Lt,{children:[(0,l.jsx)(h.tv,{asChild:!0,children:(0,l.jsxs)(r.$,{variant:"outline",size:"sm",onClick:()=>F(s),children:[(0,l.jsx)(j.A,{className:"h-4 w-4 text-red-500"}),(0,l.jsx)("span",{className:"sr-only",children:"Delete"})]})}),(0,l.jsxs)(h.EO,{children:[(0,l.jsxs)(h.wd,{children:[(0,l.jsx)(h.r7,{children:"Are you absolutely sure?"}),(0,l.jsxs)(h.$v,{children:['This will permanently delete the category "',s.name,'". This action cannot be undone.']})]}),(0,l.jsxs)(h.ck,{children:[(0,l.jsx)(h.Zr,{onClick:()=>F(null),children:"Cancel"}),(0,l.jsx)(h.Rx,{onClick:P,children:"Delete"})]})]})]})]})})]},s.id)})})]}):(0,l.jsx)("div",{className:"text-center py-10",children:(0,l.jsx)("p",{className:"text-muted-foreground",children:"No categories found"})})})]}),(0,l.jsx)(d.lG,{open:E,onOpenChange:S,children:(0,l.jsxs)(d.Cf,{children:[(0,l.jsx)(d.c7,{children:(0,l.jsx)(d.L3,{children:"Edit Category"})}),(0,l.jsx)("div",{className:"space-y-4 py-4",children:(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(o.J,{htmlFor:"edit-name",children:"Category Name"}),(0,l.jsx)(c.p,{id:"edit-name",placeholder:"Enter category name",value:(null==k?void 0:k.name)||"",onChange:e=>b(k?{...k,name:e.target.value}:null)})]})}),(0,l.jsxs)(d.Es,{children:[(0,l.jsx)(r.$,{variant:"outline",onClick:()=>S(!1),children:"Cancel"}),(0,l.jsx)(r.$,{onClick:L,children:"Update Category"})]})]})})]})}},72959:(e,s,a)=>{Promise.resolve().then(a.bind(a,55414))}},e=>{var s=s=>e(e.s=s);e.O(0,[4277,8543,4692,8712,697,2585,8441,1684,7358],()=>s(72959)),_N_E=e.O()}]);