(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5516],{12767:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});let l=(0,a(19946).A)("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]])},13052:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});let l=(0,a(19946).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},13717:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});let l=(0,a(19946).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},21492:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});let l=(0,a(19946).A)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]])},29621:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});let l=(0,a(19946).A)("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]])},30129:(e,s,a)=>{"use strict";a.d(s,{e:()=>p});var l=a(95155),n=a(12115),t=a(97168),i=a(89852),r=a(99840),c=a(50773),d=a(54416),o=a(99890),m=a(85339),h=a(29869),x=a(56671);function p(e){let{apiEndpoint:s,entityType:a,onUploadSuccess:p,allowedFileTypes:u=".xls,.xlsx,.csv,.txt"}=e,[j,y]=(0,n.useState)(!1),[f,g]=(0,n.useState)(null),[v,N]=(0,n.useState)(!1),[C,w]=(0,n.useState)(null),A=(0,n.useRef)(null),k=()=>{g(null),w(null),A.current&&(A.current.value="")},b=async()=>{if(!f){w("Please select a file");return}N(!0),w(null);try{let e=new FormData;e.append("file",f);let l=await fetch(s,{method:"POST",body:e});if(!l.ok){let e=await l.json();throw Error(e.message||"Failed to upload ".concat(a))}let n=await l.json();x.oR.success("Successfully uploaded ".concat(n.added," ").concat(a).concat(1!==n.added?"s":"",".")+(n.duplicates>0?" ".concat(n.duplicates," duplicate(s) were skipped."):"")),p(n.data),y(!1),k()}catch(e){w(e.message||"Failed to upload ".concat(a)),x.oR.error("Upload error: ".concat(e.message||"Unknown error"))}finally{N(!1)}};return(0,l.jsxs)(r.lG,{open:j,onOpenChange:y,children:[(0,l.jsx)(r.zM,{asChild:!0,children:(0,l.jsxs)(t.$,{variant:"outline",className:"gap-1",children:[(0,l.jsx)(c.A,{className:"h-4 w-4"}),"Bulk Upload"]})}),(0,l.jsxs)(r.Cf,{children:[(0,l.jsx)(r.c7,{children:(0,l.jsxs)(r.L3,{children:["Upload ",a," Data"]})}),(0,l.jsx)("div",{className:"space-y-4 py-4",children:(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("p",{className:"text-sm text-muted-foreground mb-2",children:["Upload a CSV, Excel (.xls/.xlsx), or text file containing ",a," data.",(0,l.jsx)("br",{}),'The file should contain at minimum a "name" column.']}),(0,l.jsx)("div",{className:"grid w-full items-center gap-1.5",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(i.p,{id:"file",type:"file",ref:A,accept:u,onChange:e=>{var s;w(null);let a=null===(s=e.target.files)||void 0===s?void 0:s[0];if(a){if(a.size>5242880){w("File size exceeds 5MB limit");return}g(a)}},className:"flex-1"}),f&&(0,l.jsx)(t.$,{variant:"ghost",size:"icon",onClick:k,children:(0,l.jsx)(d.A,{className:"h-4 w-4"})})]})}),f&&(0,l.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 rounded-md bg-secondary",children:[(0,l.jsx)(o.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"font-medium text-sm truncate",children:f.name}),(0,l.jsxs)("span",{className:"text-muted-foreground text-xs ml-auto",children:[(f.size/1024).toFixed(1)," KB"]})]}),C&&(0,l.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 rounded-md bg-destructive/10 text-destructive",children:[(0,l.jsx)(m.A,{className:"h-4 w-4"}),(0,l.jsx)("p",{className:"text-sm",children:C})]}),(0,l.jsxs)("div",{className:"mt-2 text-xs text-muted-foreground",children:[(0,l.jsx)("p",{children:"File format requirements:"}),(0,l.jsxs)("ul",{className:"list-disc pl-5 mt-1 space-y-1",children:[(0,l.jsx)("li",{children:"For CSV/Excel: Include headers (name, description)"}),(0,l.jsxs)("li",{children:["For TXT: One ",a," name per line"]}),(0,l.jsx)("li",{children:"Maximum file size: 5MB"})]})]})]})}),(0,l.jsxs)(r.Es,{children:[(0,l.jsx)(t.$,{variant:"outline",onClick:()=>y(!1),disabled:v,children:"Cancel"}),(0,l.jsx)(t.$,{onClick:b,disabled:!f||v,className:"relative",children:v?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"opacity-0",children:"Upload"}),(0,l.jsx)("span",{className:"absolute inset-0 flex items-center justify-center",children:(0,l.jsxs)("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[(0,l.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,l.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Upload"]})})]})]})]})}},39881:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});let l=(0,a(19946).A)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]])},42355:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});let l=(0,a(19946).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},52278:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});let l=(0,a(19946).A)("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]])},58832:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});let l=(0,a(19946).A)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]])},75525:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});let l=(0,a(19946).A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},87060:(e,s,a)=>{Promise.resolve().then(a.bind(a,99818))},99818:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>z});var l=a(95155),n=a(12115),t=a(97168),i=a(89852),r=a(88145),c=a(88524),d=a(88482),o=a(49251),m=a(58642),h=a(82714),x=a(99840);let p=x.zM,u=x.L3,j=h.J;function y(e){let{domain:s,onSubmit:a,trigger:r,isAdmin:c}=e,[d,o]=(0,n.useState)(!1),[m,h]=(0,n.useState)({name:(null==s?void 0:s.name)||"",paymentCode:(null==s?void 0:s.paymentCode)||""});return(0,l.jsxs)(x.lG,{open:d,onOpenChange:o,children:[(0,l.jsx)(p,{asChild:!0,children:r}),(0,l.jsxs)(x.Cf,{className:"sm:max-w-[425px]",children:[(0,l.jsx)(x.c7,{children:(0,l.jsx)(u,{children:s?"Edit Professional Domain":"Add New Professional Domain"})}),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a(m),o(!1),s||h({name:"",paymentCode:""})},className:"space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(j,{htmlFor:"name",children:"Domain Name"}),(0,l.jsx)(i.p,{id:"name",value:m.name,onChange:e=>h({...m,name:e.target.value}),required:!0,placeholder:"e.g., Technology, Healthcare, Finance"})]}),c&&(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(j,{htmlFor:"paymentCode",children:"Payment Code (Admin Only)"}),(0,l.jsx)(i.p,{id:"paymentCode",value:m.paymentCode,onChange:e=>h({...m,paymentCode:e.target.value}),placeholder:"Enter payment code",className:"bg-purple-50 border-purple-200"}),(0,l.jsx)("p",{className:"text-xs text-purple-600",children:"This field is only visible to administrators"})]}),(0,l.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,l.jsx)(t.$,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),(0,l.jsx)(t.$,{type:"submit",children:s?"Update":"Create"})]})]})]})]})}var f=a(79159),g=a(75525),v=a(84616),N=a(47924),C=a(29621),w=a(13717),A=a(62525),k=a(30129),b=a(38543),S=a(16559);function z(){let{data:e,addProfessionalDomain:s,updateProfessionalDomain:a,deleteProfessionalDomain:h,bulkUploadProfessionalDomains:x,refreshData:p}=(0,f.m)(),[u,j]=(0,n.useState)(""),[z,P]=(0,n.useState)(1),[D,F]=(0,n.useState)(10),[M,E]=(0,n.useState)(null),[U]=(0,n.useState)(!0),[R,T]=(0,n.useState)(null),O=e=>{let s="asc";M&&M.key===e&&"asc"===M.direction&&(s="desc"),E({key:e,direction:s})},$=[...e.professionalDomains.filter(e=>e.name.toLowerCase().includes(u.toLowerCase())||e.paymentCode&&e.paymentCode.toLowerCase().includes(u.toLowerCase()))].sort((e,s)=>{if(!M)return 0;let a=e[M.key],l=s[M.key];return void 0===a&&void 0===l?0:void 0===a?1:void 0===l?-1:a<l?"asc"===M.direction?-1:1:a>l?"asc"===M.direction?1:-1:0}),L=Math.ceil($.length/D),q=(z-1)*D,B=$.slice(q,q+D),V=e=>{j(e),P(1)};return(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Professional Domains"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Manage business sectors and payment codes"})]}),(0,l.jsxs)(d.Zp,{children:[(0,l.jsxs)(d.aR,{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)(d.ZB,{className:"flex items-center space-x-2",children:[(0,l.jsx)("span",{children:"All Professional Domains"}),U&&(0,l.jsxs)(r.E,{variant:"secondary",className:"bg-purple-100 text-purple-800",children:[(0,l.jsx)(g.A,{className:"w-3 h-3 mr-1"}),"Admin View"]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(k.e,{apiEndpoint:"".concat("http://localhost:5000/api","/professional-domains/bulk-upload"),entityType:"professional domain",onUploadSuccess:e=>{0===e.length?b.oR.info("No new professional domains were added",{position:"top-right",autoClose:5e3}):b.oR.success((0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"font-semibold mb-1",children:["Successfully uploaded ",e.length," ",1===e.length?"professional domain":"professional domains"]}),(0,l.jsxs)("ul",{className:"list-disc pl-4 mt-1 text-sm max-h-32 overflow-auto",children:[e.slice(0,5).map((e,s)=>(0,l.jsxs)("li",{children:[e.name,e.paymentCode&&(0,l.jsxs)("span",{className:"text-purple-600 ml-1",children:["(Code: ",e.paymentCode,")"]})]},s)),e.length>5&&(0,l.jsxs)("li",{children:["...and ",e.length-5," more"]})]})]}),{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});let s=p();b.oR.promise(s,{pending:"Updating professional domains list...",success:"Professional domains list refreshed successfully!",error:"Failed to refresh professional domains"},{position:"top-right",autoClose:3e3})}}),(0,l.jsx)(y,{onSubmit:s,isAdmin:U,trigger:(0,l.jsxs)(t.$,{children:[(0,l.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Add Domain"]})})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(N.A,{className:"h-4 w-4 text-gray-400"}),(0,l.jsx)(i.p,{placeholder:"Search domains or payment codes...",value:u,onChange:e=>V(e.target.value),className:"max-w-sm"})]})]}),(0,l.jsxs)(d.Wu,{children:[(0,l.jsxs)(c.XI,{children:[(0,l.jsx)(c.A0,{children:(0,l.jsxs)(c.Hj,{children:[(0,l.jsx)(m.a,{sortKey:"name",currentSort:M,onSort:O,children:"Domain Name"}),U&&(0,l.jsx)(m.a,{sortKey:"paymentCode",currentSort:M,onSort:O,children:"Payment Code"}),(0,l.jsx)(c.nd,{children:"Clients Count"}),(0,l.jsx)(c.nd,{className:"text-right",children:"Actions"})]})}),(0,l.jsx)(c.BF,{children:B.map(s=>{let n=e.clients.filter(e=>e.professionalDomain===s.name).length;return(0,l.jsxs)(c.Hj,{children:[(0,l.jsx)(c.nA,{className:"font-medium",children:s.name}),U&&(0,l.jsx)(c.nA,{children:s.paymentCode?(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(C.A,{className:"h-4 w-4 text-purple-600"}),(0,l.jsx)("span",{className:"font-mono text-sm bg-purple-50 dark:bg-purple-900 px-2 py-1 rounded text-purple-800 dark:text-purple-100",children:s.paymentCode})]}):(0,l.jsx)("span",{className:"text-gray-400",children:"No code"})}),(0,l.jsx)(c.nA,{children:(0,l.jsxs)(r.E,{variant:"outline",children:[n," clients"]})}),(0,l.jsx)(c.nA,{className:"text-right",children:(0,l.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,l.jsx)(y,{domain:s,onSubmit:e=>a(s.id,e),isAdmin:U,trigger:(0,l.jsx)(t.$,{variant:"outline",size:"sm",children:(0,l.jsx)(w.A,{className:"h-4 w-4"})})}),(0,l.jsxs)(S.Lt,{children:[(0,l.jsx)(S.tv,{asChild:!0,children:(0,l.jsxs)(t.$,{variant:"outline",size:"sm",onClick:()=>T(s.id),disabled:n>0,children:[(0,l.jsx)(A.A,{className:"h-4 w-4 text-red-500"}),(0,l.jsx)("span",{className:"sr-only",children:"Delete"})]})}),(0,l.jsxs)(S.EO,{children:[(0,l.jsxs)(S.wd,{children:[(0,l.jsx)(S.r7,{children:"Are you absolutely sure?"}),(0,l.jsxs)(S.$v,{children:['This will permanently delete the professional domain "',s.name,'".',n>0&&(0,l.jsxs)("span",{className:"mt-2 block text-amber-600",children:["Warning: This domain is used by ",n," client(s). You must remove the domain from these clients before deleting."]}),s.paymentCode&&0===n&&(0,l.jsxs)("span",{className:"mt-2 block text-amber-600",children:["Warning: This domain has a payment code (",s.paymentCode,") associated with it."]}),0===n&&(0,l.jsx)("span",{className:"block mt-2",children:"This action cannot be undone."})]})]}),(0,l.jsxs)(S.ck,{children:[(0,l.jsx)(S.Zr,{onClick:()=>T(null),children:"Cancel"}),(0,l.jsx)(S.Rx,{onClick:()=>{R&&(h(s.id),b.oR.success('Professional domain "'.concat(s.name,'" deleted successfully')))},disabled:n>0,className:0===n?"bg-red-600 hover:bg-red-700":"",children:"Delete"})]})]})]})]})})]},s.id)})})]}),(0,l.jsx)(o.d,{currentPage:z,totalPages:L,pageSize:D,totalItems:$.length,onPageChange:P,onPageSizeChange:e=>{F(e),P(1)}})]})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[4277,8543,4692,4810,203,8712,697,4710,8441,1684,7358],()=>s(87060)),_N_E=e.O()}]);