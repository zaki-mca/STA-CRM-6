"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8969],{18969:(e,a,s)=>{s.d(a,{M:()=>h});var r=s(95155),l=s(12115),t=s(97168),n=s(89852),i=s(82714),d=s(99474),c=s(95784),o=s(99840),m=s(68780),p=s(29621),u=s(79159);class x{getCle(){let e=this.ccp.padStart(10,"0").split(""),a=0,s=9;for(let r=4;r<=13;r++)a+=Number.parseInt(e[s])*r,s-=1;return(a%100).toString().padStart(2,"0")}calculateRip(){let e=Number.parseInt(this.ccp),a=100*e%97;return"00799999"+e.toString().padStart(10,"0")+(a+85>97?97-(a+85-97):97-(a+85)).toString()}getRip(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=this.calculateRip();return e?a.slice(-2):a}getRipCle(){return this.getRip(!0).padStart(2,"0")}constructor(e){this.ccp=e}}function h(e){var a;let{client:s,professionalDomains:h,onSubmit:f,onAddProfessionalDomain:g,trigger:N}=e,[v,j]=(0,l.useState)(!1),[b,C]=(0,l.useState)({gender:(null==s?void 0:s.gender)||"Mr.",firstName:(null==s?void 0:s.firstName)||"",lastName:(null==s?void 0:s.lastName)||"",email:(null==s?void 0:s.email)||"",address:(null==s?void 0:s.address)||"",phoneNumber:(null==s?void 0:s.phoneNumber)||"",birthDate:(null==s?void 0:s.birthDate)?s.birthDate.toISOString().split("T")[0]:"",professionalDomain:(null==s?void 0:s.professionalDomain)||"",revenue:(null==s?void 0:s.revenue)||0,ccpAccount:(null==s?void 0:s.ccpAccount)||"",cleCcp:(null==s?void 0:s.cle)||"",rip:(null==s?void 0:s.rip)||"",ripCle:(null==s?void 0:s.ripCle)||"",ccpIsValid:!1}),[y,w]=(0,l.useState)(""),[A,D]=(0,l.useState)(!1),[S,R]=(0,l.useState)(""),{data:k}=(0,u.m)(),I=o.zM,B=o.L3,F=i.J,L=c.bq,P=c.gC,V=c.eb,_=h.map(e=>({value:e.name,label:e.name,domain:e.name,paymentCode:e.paymentCode}));return(0,l.useEffect)(()=>{if(b.ccpAccount){let e=function(e){if(!e||""===e.trim()||!/^\d+$/.test(e))return{cleCcp:"",rip:"",ripCle:"",isValid:!1};try{let a=new x(e);return{cleCcp:a.getCle(),rip:a.getRip(),ripCle:a.getRipCle(),isValid:!0}}catch(e){return{cleCcp:"",rip:"",ripCle:"",isValid:!1}}}(b.ccpAccount);C(a=>({...a,cleCcp:e.cleCcp,rip:e.rip,ripCle:e.ripCle,ccpIsValid:e.isValid}))}else C(e=>({...e,cleCcp:"",rip:"",ripCle:"",ccpIsValid:!1}))},[b.ccpAccount]),(0,l.useEffect)(()=>{b.email&&k.clients.some(e=>e.email.toLowerCase()===b.email.toLowerCase()&&(!s||e.id!==s.id))?R("This email is already in use by another client"):R("")},[b.email,k.clients,s]),(0,r.jsxs)(o.lG,{open:v,onOpenChange:j,children:[(0,r.jsx)(I,{asChild:!0,children:N}),(0,r.jsxs)(o.Cf,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[(0,r.jsx)(o.c7,{children:(0,r.jsx)(B,{children:s?"Edit Client":"Add New Client"})}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),!S&&(f({...b,birthDate:new Date(b.birthDate),cle:b.cleCcp,ripCle:b.ripCle}),j(!1),s||C({gender:"Mr.",firstName:"",lastName:"",email:"",address:"",phoneNumber:"",birthDate:"",professionalDomain:"",revenue:0,ccpAccount:"",cleCcp:"",rip:"",ripCle:"",ccpIsValid:!1}))},className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(F,{htmlFor:"gender",children:"Gender"}),(0,r.jsxs)(c.l6,{value:b.gender,onValueChange:e=>C({...b,gender:e}),children:[(0,r.jsx)(L,{children:(0,r.jsx)(c.yv,{placeholder:"Select gender"})}),(0,r.jsxs)(P,{children:[(0,r.jsx)(V,{value:"Mr.",children:"Mr."}),(0,r.jsx)(V,{value:"Ms.",children:"Ms."}),(0,r.jsx)(V,{value:"Mrs.",children:"Mrs."})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(F,{htmlFor:"firstName",children:"First Name"}),(0,r.jsx)(n.p,{id:"firstName",value:b.firstName,onChange:e=>C({...b,firstName:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(F,{htmlFor:"lastName",children:"Last Name"}),(0,r.jsx)(n.p,{id:"lastName",value:b.lastName,onChange:e=>C({...b,lastName:e.target.value}),required:!0})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(F,{htmlFor:"email",children:"Email"}),(0,r.jsx)(n.p,{id:"email",type:"email",value:b.email,onChange:e=>C({...b,email:e.target.value}),required:!0,className:S?"border-red-500":""}),S&&(0,r.jsx)("p",{className:"text-sm text-red-500",children:S})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(F,{htmlFor:"phoneNumber",children:"Phone Number"}),(0,r.jsx)(n.p,{id:"phoneNumber",value:b.phoneNumber,onChange:e=>C({...b,phoneNumber:e.target.value}),required:!0})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(F,{htmlFor:"address",children:"Address"}),(0,r.jsx)(d.T,{id:"address",value:b.address,onChange:e=>C({...b,address:e.target.value}),required:!0,rows:3})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(F,{htmlFor:"birthDate",children:"Birth Date"}),(0,r.jsx)(n.p,{id:"birthDate",type:"date",value:b.birthDate,onChange:e=>C({...b,birthDate:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(F,{htmlFor:"revenue",children:"Annual Revenue"}),(0,r.jsx)(n.p,{id:"revenue",type:"number",step:"0.01",value:b.revenue,onChange:e=>C({...b,revenue:Number.parseFloat(e.target.value)||0}),placeholder:"0.00"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(F,{children:"Professional Domain"}),A?(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(n.p,{placeholder:"New professional domain",value:y,onChange:e=>w(e.target.value)}),(0,r.jsx)(t.$,{type:"button",onClick:()=>{y.trim()&&(g(y.trim()),C({...b,professionalDomain:y.trim()}),w(""),D(!1))},children:"Add"}),(0,r.jsx)(t.$,{type:"button",variant:"outline",onClick:()=>D(!1),children:"Cancel"})]}):(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(m.Z,{value:b.professionalDomain,onValueChange:e=>C({...b,professionalDomain:e}),options:_,placeholder:"Select professional domain",searchPlaceholder:"Search domains...",className:"flex-1"}),(0,r.jsx)(t.$,{type:"button",variant:"outline",onClick:()=>D(!0),children:"Add New"})]})]}),b.professionalDomain&&(0,r.jsx)("div",{className:"mt-2 p-2 bg-purple-50 rounded border border-purple-200",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(p.A,{className:"h-4 w-4 text-purple-600"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Payment Code:"}),(0,r.jsx)("span",{className:"font-mono text-sm bg-purple-100 px-2 py-1 rounded",children:(null===(a=h.find(e=>e.name===b.professionalDomain))||void 0===a?void 0:a.paymentCode)||"No code assigned"})]})}),(0,r.jsxs)("div",{className:"border-t pt-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-4",children:"\uD83C\uDDE9\uD83C\uDDFF Algeria CCP Account Information"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(F,{htmlFor:"ccpAccount",children:"CCP Account Number"}),(0,r.jsx)(n.p,{id:"ccpAccount",value:b.ccpAccount,onChange:e=>C({...b,ccpAccount:e.target.value}),placeholder:"Enter CCP account number (e.g., 1234567890)",className:b.ccpAccount&&!b.ccpIsValid?"border-red-300":""}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Enter your Algeria CCP account number (digits only). All values will be calculated automatically."}),b.ccpAccount&&!b.ccpIsValid&&(0,r.jsx)("p",{className:"text-sm text-red-500",children:"Please enter only digits (0-9) for the CCP account number."})]}),b.ccpAccount&&b.ccpIsValid&&(0,r.jsxs)("div",{className:"space-y-4 p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,r.jsx)("h4",{className:"font-medium text-green-800 mb-3",children:"Calculated Results"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center p-3 bg-white rounded border border-green-300",children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"CCP Number:"}),(0,r.jsx)("span",{className:"font-mono text-green-700",children:b.ccpAccount})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center p-3 bg-white rounded border border-green-300",children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"Cl\xe9 CCP:"}),(0,r.jsx)("span",{className:"font-mono text-green-700 font-bold",children:b.cleCcp})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center p-3 bg-white rounded border border-green-300",children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"RIP:"}),(0,r.jsx)("span",{className:"font-mono text-green-700 text-sm",children:b.rip})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center p-3 bg-white rounded border border-green-300",children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"RIP Cl\xe9:"}),(0,r.jsx)("span",{className:"font-mono text-green-700 font-bold",children:b.ripCle})]})]})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,r.jsx)(t.$,{type:"button",variant:"outline",onClick:()=>j(!1),children:"Cancel"}),(0,r.jsx)(t.$,{type:"submit",children:s?"Update":"Create"})]})]})]})]})}},68780:(e,a,s)=>{s.d(a,{Z:()=>b});var r=s(95155),l=s(12115),t=s(97168),n=s(20547),i=s(53999);let d=n.bL,c=n.l9,o=l.forwardRef((e,a)=>{let{className:s,align:l="center",sideOffset:t=4,...d}=e;return(0,r.jsx)(n.ZL,{children:(0,r.jsx)(n.UC,{ref:a,align:l,sideOffset:t,className:(0,i.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...d})})});o.displayName=n.UC.displayName;var m=s(77740),p=s(47924);s(99840);let u=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,r.jsx)(m.uB,{ref:a,className:(0,i.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",s),...l})});u.displayName=m.uB.displayName;let x=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,r.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,r.jsx)(p.A,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,r.jsx)(m.uB.Input,{ref:a,className:(0,i.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",s),...l})]})});x.displayName=m.uB.Input.displayName;let h=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,r.jsx)(m.uB.List,{ref:a,className:(0,i.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",s),...l})});h.displayName=m.uB.List.displayName;let f=l.forwardRef((e,a)=>(0,r.jsx)(m.uB.Empty,{ref:a,className:"py-6 text-center text-sm",...e}));f.displayName=m.uB.Empty.displayName;let g=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,r.jsx)(m.uB.Group,{ref:a,className:(0,i.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",s),...l})});g.displayName=m.uB.Group.displayName,l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,r.jsx)(m.uB.Separator,{ref:a,className:(0,i.cn)("-mx-1 h-px bg-border",s),...l})}).displayName=m.uB.Separator.displayName;let N=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,r.jsx)(m.uB.Item,{ref:a,className:(0,i.cn)("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s),...l})});N.displayName=m.uB.Item.displayName;var v=s(10081),j=s(5196);function b(e){let{value:a,onValueChange:s,options:n,placeholder:m,searchPlaceholder:p,className:b}=e,[C,y]=(0,l.useState)(!1),[w,A]=(0,l.useState)(""),D=n.find(e=>e.value===a),S=n.filter(e=>{let a=w.toLowerCase();return e.label.toLowerCase().includes(a)||e.category&&e.category.toLowerCase().includes(a)||e.brand&&e.brand.toLowerCase().includes(a)||e.description&&e.description.toLowerCase().includes(a)||e.email&&e.email.toLowerCase().includes(a)||e.domain&&e.domain.toLowerCase().includes(a)});return(0,r.jsxs)(d,{open:C,onOpenChange:y,children:[(0,r.jsx)(c,{asChild:!0,children:(0,r.jsxs)(t.$,{variant:"outline",role:"combobox","aria-expanded":C,className:(0,i.cn)("w-full justify-between",b),children:[D?D.label:m,(0,r.jsx)(v.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,r.jsx)(o,{className:"w-full p-0",align:"start",children:(0,r.jsxs)(u,{shouldFilter:!1,children:[(0,r.jsx)(x,{placeholder:p,value:w,onValueChange:A}),(0,r.jsxs)(h,{children:[(0,r.jsx)(f,{children:"No item found."}),(0,r.jsx)(g,{className:"max-h-64 overflow-auto",children:S.map(e=>(0,r.jsxs)(N,{value:e.value,onSelect:e=>{s(e===a?"":e),y(!1),A("")},children:[(0,r.jsx)(j.A,{className:(0,i.cn)("mr-2 h-4 w-4",a===e.value?"opacity-100":"opacity-0")}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"font-medium",children:e.label}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.category&&(0,r.jsx)("span",{className:"bg-gray-100 px-2 py-0.5 rounded text-xs",children:e.category}),e.brand&&(0,r.jsx)("span",{className:"bg-blue-100 px-2 py-0.5 rounded text-xs",children:e.brand}),e.email&&(0,r.jsx)("span",{className:"text-blue-600",children:e.email}),e.domain&&(0,r.jsx)("span",{className:"bg-green-100 px-2 py-0.5 rounded text-xs",children:e.domain}),void 0!==e.price&&"number"==typeof e.price&&(0,r.jsxs)("span",{className:"font-medium text-green-600",children:["$",e.price.toFixed(2)]})]})]})]},e.value))})]})]})})]})}},99474:(e,a,s)=>{s.d(a,{T:()=>n});var r=s(95155),l=s(12115),t=s(53999);let n=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,r.jsx)("textarea",{className:(0,t.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...l})});n.displayName="Textarea"}}]);